{
    "$schema": "../../extension.schema.json",
    "$name": "app",
    "$version": "1.0.0",
    "$references": [
        "plugin1.json",
        "plugin2.json"
    ],

    "rules": [
        {
            "id": "app.trashcan.hasSelection",
            "type": "core.every",
            "parameters": [
                { "type": "rule", "value": "app.selection.notEmpty" },
                { "type": "rule", "value": "app.navigation.isTrashcan" }
            ]
        },
        {
            "id": "app.toolbar.canEditFolder",
            "type": "core.every",
            "parameters": [
                { "type": "rule", "value": "app.selection.folder" },
                { "type": "rule", "value": "app.selection.folder.canUpdate" }
            ]
        },
        {
            "id": "app.toolbar.canViewFile",
            "type": "core.every",
            "parameters": [
                {
                    "type": "rule",
                    "value": "app.selection.file"
                },
                {
                    "type": "rule",
                    "value": "core.not",
                    "parameters": [
                        { "type": "rule", "value": "app.navigation.isTrashcan" }
                    ]
                }
            ]
        },
        {
            "id": "app.toolbar.canDownload",
            "type": "core.every",
            "parameters": [
                { "type": "rule", "value": "app.selection.canDownload" },
                { "type": "rule", "value": "app.navigation.isNotTrashcan" }
            ]
        }
    ],

    "features": {
        "create": [
            {
                "id": "app.create.folder",
                "type": "default",
                "icon": "create_new_folder",
                "title": "APP.NEW_MENU.MENU_ITEMS.CREATE_FOLDER",
                "description": "APP.NEW_MENU.TOOLTIPS.CREATE_FOLDER",
                "actions": {
                    "click": "CREATE_FOLDER"
                },
                "rules": {
                    "enabled": "app.navigation.folder.canCreate"
                }
            },
            {
                "id": "app.create.uploadFile",
                "type": "default",
                "icon": "file_upload",
                "title": "APP.NEW_MENU.MENU_ITEMS.UPLOAD_FILE",
                "description": "APP.NEW_MENU.TOOLTIPS.UPLOAD_FILES",
                "actions": {
                    "click": "UPLOAD_FILES"
                },
                "rules": {
                    "enabled": "app.navigation.folder.canUpload"
                }
            },
            {
                "id": "app.create.uploadFolder",
                "type": "default",
                "icon": "file_upload",
                "title": "APP.NEW_MENU.MENU_ITEMS.UPLOAD_FOLDER",
                "description": "APP.NEW_MENU.TOOLTIPS.UPLOAD_FOLDERS",
                "actions": {
                    "click": "UPLOAD_FOLDER"
                },
                "rules": {
                    "enabled": "app.navigation.folder.canUpload"
                }
            }
        ],
        "navbar": [
            {
                "id": "app.navbar.primary",
                "items": [
                    {
                        "id": "app.navbar.personalFiles",
                        "icon": "folder",
                        "title": "APP.BROWSE.PERSONAL.SIDENAV_LINK.LABEL",
                        "description": "APP.BROWSE.PERSONAL.SIDENAV_LINK.TOOLTIP",
                        "route": "personal-files"
                    },
                    {
                        "id": "app.navbar.libraries",
                        "icon": "group_work",
                        "title": "APP.BROWSE.LIBRARIES.SIDENAV_LINK.LABEL",
                        "description": "APP.BROWSE.LIBRARIES.SIDENAV_LINK.TOOLTIP",
                        "route": "libraries"
                    }
                ]
            },
            {
                "id": "app.navbar.secondary",
                "items": [
                    {
                        "id": "app.navbar.shared",
                        "icon": "people",
                        "title": "APP.BROWSE.SHARED.SIDENAV_LINK.LABEL",
                        "description": "APP.BROWSE.SHARED.SIDENAV_LINK.TOOLTIP",
                        "route": "shared"
                    },
                    {
                        "id": "app.navbar.recentFiles",
                        "icon": "schedule",
                        "title": "APP.BROWSE.RECENT.SIDENAV_LINK.LABEL",
                        "description": "APP.BROWSE.RECENT.SIDENAV_LINK.TOOLTIP",
                        "route": "recent-files"
                    },
                    {
                        "id": "app.navbar.favorites",
                        "icon": "star",
                        "title": "APP.BROWSE.FAVORITES.SIDENAV_LINK.LABEL",
                        "description": "APP.BROWSE.FAVORITES.SIDENAV_LINK.TOOLTIP",
                        "route": "favorites"
                    },
                    {
                        "id": "app.navbar.trashcan",
                        "icon": "delete",
                        "title": "APP.BROWSE.TRASHCAN.SIDENAV_LINK.LABEL",
                        "description": "APP.BROWSE.TRASHCAN.SIDENAV_LINK.TOOLTIP",
                        "route": "trashcan"
                    }
                ]
            }
        ],
        "content": {
            "actions": [
                {
                    "id": "app.toolbar.separator.1",
                    "order": 5,
                    "type": "separator"
                },
                {
                    "id": "app.toolbar.createFolder",
                    "type": "button",
                    "order": 10,
                    "title": "APP.NEW_MENU.MENU_ITEMS.CREATE_FOLDER",
                    "description": "APP.NEW_MENU.TOOLTIPS.CREATE_FOLDER",
                    "icon": "create_new_folder",
                    "actions": {
                        "click": "CREATE_FOLDER"
                    },
                    "rules": {
                        "visible": "app.navigation.folder.canCreate"
                    }
                },
                {
                    "id": "app.toolbar.uploadFile",
                    "order": 11,
                    "type": "button",
                    "icon": "file_upload",
                    "title": "APP.NEW_MENU.MENU_ITEMS.UPLOAD_FILE",
                    "description": "APP.NEW_MENU.TOOLTIPS.UPLOAD_FILES",
                    "actions": {
                        "click": "UPLOAD_FILES"
                    },
                    "rules": {
                        "visible": "app.navigation.folder.canUpload"
                    }
                },
                {
                    "id": "app.toolbar.uploadFolder",
                    "order": 12,
                    "type": "button",
                    "icon": "cloud_upload",
                    "title": "APP.NEW_MENU.MENU_ITEMS.UPLOAD_FOLDER",
                    "description": "APP.NEW_MENU.TOOLTIPS.UPLOAD_FOLDERS",
                    "actions": {
                        "click": "UPLOAD_FOLDER"
                    },
                    "rules": {
                        "visible": "app.navigation.folder.canUpload"
                    }
                },
                {
                    "id": "app.toolbar.separator.2",
                    "order": 5,
                    "type": "separator"
                },
                {
                    "id": "app.toolbar.preview",
                    "type": "button",
                    "order": 15,
                    "title": "APP.ACTIONS.VIEW",
                    "icon": "open_in_browser",
                    "actions": {
                        "click": "VIEW_FILE"
                    },
                    "rules": {
                        "visible": "app.toolbar.canViewFile"
                    }
                },
                {
                    "id": "app.toolbar.download",
                    "type": "button",
                    "order": 20,
                    "title": "APP.ACTIONS.DOWNLOAD",
                    "icon": "get_app",
                    "actions": {
                        "click": "DOWNLOAD_NODES"
                    },
                    "rules": {
                        "visible": "app.toolbar.canDownload"
                    }
                },
                {
                    "id": "app.toolbar.editFolder",
                    "type": "button",
                    "order": 30,
                    "title": "APP.ACTIONS.EDIT",
                    "icon": "create",
                    "actions": {
                        "click": "EDIT_FOLDER"
                    },
                    "rules": {
                        "visible": "app.toolbar.canEditFolder"
                    }
                },
                {
                    "id": "app.toolbar.purgeDeletedNodes",
                    "type": "button",
                    "title": "APP.ACTIONS.DELETE_PERMANENT",
                    "icon": "delete_forever",
                    "actions": {
                        "click": "PURGE_DELETED_NODES"
                    },
                    "rules": {
                        "visible": "app.trashcan.hasSelection"
                    }
                },
                {
                    "id": "app.toolbar.restoreDeletedNodes",
                    "type": "button",
                    "title": "APP.ACTIONS.RESTORE",
                    "icon": "restore",
                    "actions": {
                        "click": "RESTORE_DELETED_NODES"
                    },
                    "rules": {
                        "visible": "app.trashcan.hasSelection"
                    }
                },
                {
                    "id": "app.toolbar.createLibrary",
                    "type": "button",
                    "title": "Create Library",
                    "icon": "create_new_folder",
                    "actions": {
                        "click": "CREATE_LIBRARY"
                    },
                    "rules": {
                        "visible": "app.navigation.isLibraries"
                    }
                },
                {
                    "id": "app.toolbar.more",
                    "type": "menu",
                    "icon": "more_vert",
                    "title": "APP.ACTIONS.MORE",
                    "children": [
                        {
                            "id": "app.toolbar.share",
                            "type": "button",
                            "title": "APP.ACTIONS.SHARE",
                            "icon": "share",
                            "actions": {
                                "click": "SHARE_NODE"
                            },
                            "rules": {
                                "visible": "app.selection.file.canShare"
                            }
                        },
                        {
                            "id": "app.toolbar.unshare",
                            "type": "button",
                            "title": "APP.ACTIONS.UNSHARE",
                            "icon": "stop_screen_share",
                            "actions": {
                                "click": "UNSHARE_NODES"
                            },
                            "rules": {
                                "visible": "app.selection.canUnshare"
                            }
                        },
                        {
                            "id": "app.toolbar.delete",
                            "type": "button",
                            "title": "APP.ACTIONS.DELETE",
                            "icon": "delete",
                            "actions": {
                                "click": "DELETE_NODES"
                            },
                            "rules": {
                                "visible": "app.selection.canDelete"
                            }
                        },
                        {
                            "id": "app.toolbar.deleteLibrary",
                            "type": "button",
                            "title": "APP.ACTIONS.DELETE",
                            "icon": "delete",
                            "actions": {
                                "click": "DELETE_LIBRARY"
                            },
                            "rules": {
                                "visible": "app.selection.library"
                            }
                        }
                    ]
                },
                {
                    "id": "app.toolbar.separator.3",
                    "order": 200,
                    "type": "separator"
                },
                {
                    "disabled": true,
                    "id": "app.toolbar.custom.1",
                    "order": 200,
                    "type": "custom",
                    "component": "app.demo.button"
                }
            ]
        }
    }
}
