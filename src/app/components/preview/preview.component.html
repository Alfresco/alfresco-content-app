<ng-container *ngIf="nodeId">
  <adf-viewer
    [nodeId]="nodeId"
    [allowNavigate]="navigateMultiple"
    [allowRightSidebar]="showRightSide"
    [allowPrint]="false"
    [showRightSidebar]="showRightSide"
    [allowDownload]="false"
    [allowFullScreen]="false"
    [canNavigateBefore]="previousNodeId"
    [canNavigateNext]="nextNodeId"
    [overlayMode]="true"
    (showViewerChange)="onVisibilityChanged($event)"
    (navigateBefore)="onNavigateBefore()"
    (navigateNext)="onNavigateNext()"
    [ngClass]="showRightSide ? 'hide-last-divider' : ''"
  >
    <adf-viewer-sidebar *ngIf="(infoDrawerOpened$ | async)">
      <aca-info-drawer [node]="selection.file"></aca-info-drawer>
    </adf-viewer-sidebar>

    <adf-viewer-open-with *ngIf="openWith.length">
      <ng-container *ngFor="let action of openWith; trackBy: trackByActionId">
        <app-toolbar-menu-item [actionRef]="action"></app-toolbar-menu-item>
      </ng-container>
    </adf-viewer-open-with>

    <adf-viewer-toolbar-actions>
      <ng-container
        *ngFor="let action of viewerToolbarActions; trackBy: trackByActionId"
      >
        <aca-toolbar-action [actionRef]="action"></aca-toolbar-action>
      </ng-container>
    </adf-viewer-toolbar-actions>

    <ng-container *ngFor="let ext of contentExtensions">
      <adf-viewer-extension [supportedExtensions]="[ext.fileExtension]">
        <ng-template let-url="urlFileContent" let-extension="extension">
          <app-preview-extension
            [id]="ext.component"
            [node]="selection.file?.entry"
            [url]="url"
            [extension]="extension"
            [attr.data-automation-id]="ext.component"
          >
          </app-preview-extension>
        </ng-template>
      </adf-viewer-extension>
    </ng-container>
  </adf-viewer>
</ng-container>
