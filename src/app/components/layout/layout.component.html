<div class="layout">
    <adf-upload-drag-area
        [parentId]="node?.id"
        [disabled]="!canUpload">

        <adf-sidenav-layout
            #sidenavManager="acaSidenavManager"
            acaSidenavManager
            [sidenavMin]="70"
            [sidenavMax]="320"
            [stepOver]="600"
            [hideSidenav]="sidenavManager.hideSidenav"
            [expandedSidenav]="expandedSidenav"
            (expanded)="sidenavManager.setState($event)">

            <adf-sidenav-layout-header>
                <ng-template let-toggleMenu="toggleMenu">
                    <adf-layout-header
                        [logo]="logo$ | async"
                        [redirectUrl]="'/personal-files'"
                        [tooltip]="appName$ | async"
                        [color]="headerColor$ | async"
                        [title]="appName$ | async"
                        (clicked)="toggleMenu($event)">

                        <div class="adf-toolbar--spacer"></div>

                        <ng-container *ngIf="!isSmallScreen">
                            <aca-search-input></aca-search-input>
                            <adf-toolbar-divider></adf-toolbar-divider>
                        </ng-container>

                        <aca-current-user></aca-current-user>

                    </adf-layout-header>
                </ng-template>
            </adf-sidenav-layout-header>

            <adf-sidenav-layout-navigation>
                <ng-template let-isMenuMinimized="isMenuMinimized">
                    <app-sidenav [showLabel]="!isMenuMinimized()"></app-sidenav>
                </ng-template>
            </adf-sidenav-layout-navigation>

            <adf-sidenav-layout-content>
                <ng-template>
                    <router-outlet></router-outlet>
                </ng-template>
            </adf-sidenav-layout-content>

        </adf-sidenav-layout>

        <adf-file-uploading-dialog position="left"></adf-file-uploading-dialog>
    </adf-upload-drag-area>
</div>
