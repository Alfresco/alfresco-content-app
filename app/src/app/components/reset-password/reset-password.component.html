<div class="reset-password-div">

  <mat-card>

    <mat-card-header>
      <mat-card-title class="app-reset-password-title">
        {{ 'RESET_PASSWORD.RESET-PASSWORD' | translate }}
      </mat-card-title>

    </mat-card-header>
    <hr>

    <mat-card-content>

      <p class="password-rules">{{ 'RESET_PASSWORD.INFO_FILLER' | translate }}</p>
      <ul>
        <li>{{ 'RESET_PASSWORD.PASSWORD_RULES.LENGTH' | translate }}</li>
        <li>{{ 'RESET_PASSWORD.PASSWORD_RULES.UPPERCASE' | translate }}</li>
        <li>{{ 'RESET_PASSWORD.PASSWORD_RULES.LOWERCASE' | translate }}</li>
        <li>{{ 'RESET_PASSWORD.PASSWORD_RULES.NUMBER' | translate }}</li>
        <li>{{ 'RESET_PASSWORD.PASSWORD_RULES.SPECIAL_CHARACTER' | translate }}</li>
      </ul>

      <form [formGroup]="resetPasswordForm">

        <div class="reset-password-form-field">
          <label for="new-passssword" class="app-reset-password-label">{{ 'RESET_PASSWORD.NEW_PASSWORD' | translate }}</label>

          <div class="new-password-input-container">
            <input id="new-passssword" class="app-reset-password-field" placeholder="{{'RESET_PASSWORD.PLACEHOLDERS.ENTER_PASSWORD' | translate }}" formControlName="password" required
              [type]="passwordVisibility ? 'text' : 'password'" minlength="6" maxlength="20">

              <button matSuffix mat-icon-button type="button" (click)="togglePasswordVisibility()">
                <mat-icon class="visibility-icon"> {{ passwordVisibility ? 'visibility_off' : 'visibility' }}</mat-icon>
              </button>
            </div>
        </div>

        <div class="password-mismatch-error" *ngIf="this.resetPasswordForm.controls.password.errors?.pattern && this.resetPasswordForm.controls.password?.touched;">
          {{ 'RESET_PASSWORD.ERRORS.INVALID_PASSWORD_FORMAT' | translate }}
        </div>

        <div class="reset-password-form-field">
          <label for="confirm-password" class="app-reset-password-label">{{ 'RESET_PASSWORD.RE_ENTER_NEW_PASSWORD' | translate }}</label>

          <div class="confirm-password-input-container">
            <input id="confirm-passssword" class="app-reset-password-field" placeholder="{{'RESET_PASSWORD.PLACEHOLDERS.CONFIRM_PASSWORD' | translate }}" formControlName="confirmPassword"
              required [type]="confirmPasswordVisibility ? 'text' : 'password'" minlength="6" maxlength="20">

              <button matSuffix mat-icon-button type="button" (click)="toggleConfirmPasswordVisibility()">
                <mat-icon class="visibility-icon"> {{ confirmPasswordVisibility ? 'visibility_off' : 'visibility' }}</mat-icon>
              </button> 
            </div> 
        </div>

        <div class="password-mismatch-error" *ngIf="passwordMatchError()">
          {{ 'RESET_PASSWORD.ERRORS.PASSWORD_MISMATCH_ERROR' | translate }}
        </div>

        <button type="button" (click)="changePassword()" [disabled]="isSubmitButtonDisabled()"
          class="send-instructions-button" [attr.aria-label]="'PASSWORD.BUTTONS.SEND-INSTRUCTIONS' | translate"
          mat-raised-button color="primary">
          {{ 'RESET_PASSWORD.CHANGE_PASSWORD' | translate }}
        </button>

      </form>

    </mat-card-content>

  </mat-card>

</div>
